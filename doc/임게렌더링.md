````md id="crp83k"
## ✅ Critical Rendering Path

**Critical Rendering Path(CRP)** 는 브라우저가 **HTML을 받아 화면을 표시하기까지 거치는 과정**을 의미합니다.

즉, 사용자가 페이지를 요청한 후 **화면이 보이기까지의 핵심 렌더링 과정**입니다.

---

## 1️⃣ Critical Rendering Path 흐름

브라우저는 다음 순서로 페이지를 렌더링합니다.

1. HTML 다운로드
2. DOM 생성
3. CSS 다운로드
4. CSSOM 생성
5. Render Tree 생성
6. Layout
7. Paint
8. Composite

```text
HTML → DOM
CSS → CSSOM
DOM + CSSOM → Render Tree → Layout → Paint → Composite
```
````

---

## 2️⃣ CSS는 렌더링 차단 리소스

### ✔ 개념

CSS는 **Render Tree 생성에 반드시 필요**합니다.

브라우저는 CSS가 준비되기 전까지 화면을 그리지 않습니다.

즉,

> CSS 다운로드 완료 → CSSOM 생성 → Render Tree 생성 → 화면 표시

---

### ✔ 예시

```html
<head>
  <link rel="stylesheet" href="style.css" />
</head>
```

브라우저 동작:

1. HTML 파싱
2. CSS 발견
3. CSS 다운로드
4. CSSOM 생성
5. 렌더링 시작

---

### ✔ 이유

CSS가 없으면 Layout 계산이 불가능합니다.

예:

- width
- height
- display
- position

---

### ✔ 문제점

CSS 파일이 크면:

- First Paint 지연
- 초기 렌더링 느림

---

### ✔ 해결 방법

#### 1. Critical CSS 사용

초기 렌더링에 필요한 CSS만 먼저 로드

```html
<style>
  /* 핵심 스타일 */
</style>
```

---

#### 2. CSS 최소화

- Minify
- 압축

---

#### 3. 사용하지 않는 CSS 제거

예:

- Tailwind purge

---

## 3️⃣ JS는 DOM 파싱을 차단 가능

### ✔ 개념

JavaScript는 기본적으로 **DOM 파싱을 멈추게 합니다.**

브라우저는 JS 실행 중 HTML 파싱을 멈춥니다.

---

### ✔ 예시

```html
<script src="app.js"></script>
```

브라우저 동작:

1. HTML 파싱 중 script 발견
2. HTML 파싱 중단
3. JS 다운로드
4. JS 실행
5. HTML 파싱 재개

---

### ✔ 이유

JavaScript는 DOM을 변경할 수 있기 때문입니다.

예:

```js
document.write("<h1>Hello</h1>");
```

---

## 4️⃣ defer vs async

### ✔ defer

HTML 파싱 완료 후 실행

```html
<script defer src="app.js"></script>
```

특징:

- DOM 파싱 차단 없음
- 실행 순서 보장
- DOM 준비 후 실행

---

### ✔ async

다운로드 후 즉시 실행

```html
<script async src="app.js"></script>
```

특징:

- DOM 파싱 중 실행 가능
- 순서 보장 없음

---

## 5️⃣ 비교

| 구분          | 기본 script | defer       | async       |
| ------------- | ----------- | ----------- | ----------- |
| DOM 파싱 차단 | O           | X           | 가능        |
| 실행 시점     | 즉시        | DOM 완료 후 | 다운로드 후 |
| 순서 보장     | O           | O           | X           |

---

## 6️⃣ 최적화 방법

### ✔ 1. script는 하단 배치

```html
<body>
  내용

  <script src="app.js"></script>
</body>
```

HTML 파싱 후 실행됩니다.

---

### ✔ 2. defer 사용

```html
<script defer src="app.js"></script>
```

가장 일반적인 방법입니다.

---

### ✔ 3. CSS는 head에 배치

```html
<head>
  <link rel="stylesheet" href="style.css" />
</head>
```

---

## 7️⃣ 성능 지표와 관계

Critical Rendering Path는 성능 지표에 직접 영향을 줍니다.

예:

- First Paint
- First Contentful Paint
- Largest Contentful Paint

---

## ✅ 핵심 정리

### ✔ CSS

- Render Tree 생성 필요
- 렌더링 차단 리소스

---

### ✔ JS

- DOM 파싱 차단 가능
- script 태그에서 발생

---

## ✅ 한 줄 정리

> **빠른 렌더링 = CSS 최소화 + JS 차단 제거**
